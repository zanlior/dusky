# -------------------------------------------------------------------------------------------------
# 4.1. KEYBOARD & LANGUAGE
# -------------------------------------------------------------------------------------------------
input {
    kb_layout = us
    
    # TUI: Dropdown - Common options like "caps:escape", "grp:alt_shift_toggle"
    # This is a high-value configuration for developers.
    kb_options =
    
    resolve_binds_by_sym = false
    numlock_by_default = true
    
    # TUI: Slider [10 - 100]
    repeat_rate = 35
    
    # TUI: Slider [100 - 1000]
    repeat_delay = 250
}

# -------------------------------------------------------------------------------------------------
# 4.2. MOUSE & POINTER ACCELERATION
# -------------------------------------------------------------------------------------------------
input {
    # 0: Cursor movement doesn't change focus
    # 1: Cursor movement changes focus to window under cursor (Default)
    # 2: Detached focus (Click to focus keyboard, mouse follows independently)
    # 3: Completely separate focus
    follow_mouse = 1

    # TUI: Slider [-1.0 to 1.0]
    sensitivity = 0
    
    # TUI: Dropdown [flat, adaptive, custom]
    # "Adaptive" is generally better for touchpads/desktop use. "Flat" for gaming.
    accel_profile = adaptive

    # TUI: Toggle [true/false] - "Raw Input" for gamers.
    # Bypasses most pointer settings. Critical for high-end mice.
    force_no_accel = false

    # TUI: Toggle [true/false]
    left_handed = true

    # TUI: Toggle [true/false] - Useful for preventing focus stealing
    mouse_refocus = true
}

# -------------------------------------------------------------------------------------------------
# 4.3. SCROLLING & TRACKBALLS
# -------------------------------------------------------------------------------------------------
input {
    # TUI: Toggle [true/false] - "Natural Scrolling" (MacOS style) for mice
    natural_scroll = false

    # TUI: Dropdown [2fg, edge, on_button_down, no_scroll]
    # Vital for trackball users.
    scroll_method = 2fg
    
    # Only relevant if scroll_method is on_button_down
    scroll_button = 0
    scroll_button_lock = false
}

# -------------------------------------------------------------------------------------------------
# 4.4. TOUCHPAD
# -------------------------------------------------------------------------------------------------
input {
    touchpad {
        # TUI: Toggle [true/false]
        natural_scroll = true
        
        # TUI: Toggle [true/false] - "Disable while typing"
        disable_while_typing = true

        # TUI: Toggle [true/false] - "Tap to click"
        tap-to-click = true

        # TUI: Toggle [true/false] - "Mac-style Right Click"
        # true = 2-finger click is right click usually.
        # false = Physical click on bottom-right is right click.
        clickfinger_behavior = false

        # TUI: Toggle [true/false]
        drag_lock = false
    }
}

# -------------------------------------------------------------------------------------------------
# 4.5. CURSOR BEHAVIOR & RENDERING
# -------------------------------------------------------------------------------------------------
cursor {
    # TUI: Toggle [true/false] - Sync XCursor theme with GSettings
    sync_gsettings_theme = true

    # TUI: Dropdown [0, 1, 2] - CRITICAL for Nvidia/VMs
    # 0 = Use HW cursors (Performance)
    # 1 = Force SW cursors (Compatibility / Fixes disappearing cursor)
    # 2 = Auto (Disable when tearing)
    no_hardware_cursors = 2

    # TUI: Dropdown [0, 1, 2] - Nvidia Specific optimization
    # 0 = Off, 1 = On, 2 = Auto
    use_cpu_buffer = 2

    # TUI: Toggle [true/false] - Hides cursor when typing
    # Great for "distraction free" coding.
    hide_on_key_press = false

    # TUI: Slider [0 - 60] - Hide cursor after X seconds of inactivity (0=never)
    inactive_timeout = 0

    # TUI: Dropdown [0, 1, 2] - Workflow Preference
    # 0 = Disabled (Cursor stays put)
    # 1 = Enabled (Cursor moves to center of focused window)
    # 2 = Force
    warp_on_change_workspace = 0
    
    # TUI: Dropdown [0, 1, 2] - Gaming / VRR Specific
    # Prevents framerate spikes in VRR games by pausing cursor updates
    # 0 = Off, 1 = On, 2 = Auto
    no_break_fs_vrr = 2
    
    # TUI: Slider [1.0 - 5.0] - Accessibility / Presentation
    # Sets the zoom level for the magnifier.
    zoom_factor = 1.0
}

# -------------------------------------------------------------------------------------------------
# 4.6. GESTURE PHYSICS (Tuning)
# -------------------------------------------------------------------------------------------------
# Note: The actual actions are in the dispatchers below.
# This block controls the "feel" of the swipes.
gestures {
    # TUI: Slider [100 - 1000] - "Swipe Distance"
    workspace_swipe_distance = 300
    
    # TUI: Slider [0.0 - 1.0] - "Swipe Cancellation Threshold"
    workspace_swipe_cancel_ratio = 0.5
    
    # TUI: Toggle [true/false] - "Invert Swipe Direction"
    workspace_swipe_invert = true
    
    # TUI: Toggle [true/false] - "Swipe to Create New Workspace"
    workspace_swipe_create_new = true
    
    # TUI: Toggle [true/false] - "Swipe Forever" (Don't clamp at neighbors)
    workspace_swipe_forever = false
}

# -------------------------------------------------------------------------------------------------
# 4.7. GESTURE BINDINGS
# -------------------------------------------------------------------------------------------------
# --- Variables ---
$osdclient = swayosd-client

# 3-finger up swipe -> hyprexpo-toggle
gesture = 3, up, dispatcher, hyprexpo:expo, toggle 
# 3-finger left swipe -> swaync panal
gesture = 3, left, dispatcher, exec, swaync-client -t

# --- Regular toggeling without osdclient ---

# # 3-finger down/right swipe -> mute/pause-play
# gesture = 3, down, dispatcher, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
# gesture = 3, right, dispatcher, exec, playerctl play-pause
# 
# # 4-finger horizontal swipe -> brightness change
# gesture = 4, left, dispatcher, exec, brightnessctl -e4 -n2 set 10%-
# gesture = 4, right, dispatcher, exec, brightnessctl -e4 -n2 set 10%+
# 
# # 4-finger vertical swipe -> volume change
# gesture = 4, up, dispatcher, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 10%+
# gesture = 4, down, dispatcher, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 10%-

# --- With OSD Client --- 

# 3-finger down/right swipe -> mute/pause-play
gesture = 3, down, dispatcher, exec, $osdclient --output-volume mute-toggle
gesture = 3, right, dispatcher, exec, $osdclient --playerctl play-pause

# 4-finger horizontal swipe -> brightness change
gesture = 4, left, dispatcher, exec, $osdclient --brightness -10
gesture = 4, right, dispatcher, exec, $osdclient --brightness +10

# 4-finger vertical swipe -> volume change
gesture = 4, up, dispatcher, exec, $osdclient --output-volume +10 --max-volume 95
gesture = 4, down, dispatcher, exec, $osdclient --output-volume -10 --max-volume 95

# ---

# 3-finger pinch in -> Lock screen
gesture = 3, pinchout, dispatcher, exec, hyprlock --immediate
# 3-finger pinch out -> screenshot
gesture = 3, pinchin, dispatcher, exec, slurp | grim -g - - | swappy -f -
# 2-finger pinch out -> screenshot
gesture = 4, pinchout, dispatcher, exec, swaync-client -t



# -------------------------------------------------------------------------------------------------
# 4.8. PER-DEVICE SETTINGS
# -------------------------------------------------------------------------------------------------
device {
    name = epic-mouse-v1
    sensitivity = -0.5
}
